

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="wangcw">
  <meta name="keywords" content="">
  
    <meta name="description" content="安装前准备CRT连接123456789vim &#x2F;etc&#x2F;ssh&#x2F;sshd_configLoginGraceTime 0PermitRootLogin yesStrictModes yesUseDNS noMaxSessions 50#重启 sshd 服务systemctl restart sshd.service 主机名、时区12345timedatectl set-timezone &quot;">
<meta property="og:type" content="article">
<meta property="og:title" content="rhel9安装部署mysql8">
<meta property="og:url" content="https://blog.wongcw.cn/2022/08/10/rhel9%E5%AE%89%E8%A3%85mysql8/index.html">
<meta property="og:site_name" content="blogwong">
<meta property="og:description" content="安装前准备CRT连接123456789vim &#x2F;etc&#x2F;ssh&#x2F;sshd_configLoginGraceTime 0PermitRootLogin yesStrictModes yesUseDNS noMaxSessions 50#重启 sshd 服务systemctl restart sshd.service 主机名、时区12345timedatectl set-timezone &quot;">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-08-10T09:23:11.000Z">
<meta property="article:modified_time" content="2022-08-29T07:28:41.252Z">
<meta property="article:author" content="wangcw">
<meta property="article:tag" content="MySQL">
<meta property="article:tag" content="自建数据库">
<meta name="twitter:card" content="summary_large_image">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>rhel9安装部署mysql8 - blogwong</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/bynotes/texiao/source/css/toubudaziji.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"blog.wongcw.cn","root":"/","version":"1.9.2","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":"663d1a6ec35b55e9fe6afb524ef4adaf","google":"GTM-T9V396Z","gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  
    <!-- Baidu Analytics -->
    <script async>
      if (!Fluid.ctx.dnt) {
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?663d1a6ec35b55e9fe6afb524ef4adaf";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
      }
    </script>
  

  
    <!-- Google Analytics -->
    <script async>
      if (!Fluid.ctx.dnt) {
        Fluid.utils.createScript('https://www.google-analytics.com/analytics.js', function() {
          window.ga = window.ga || function() { (ga.q = ga.q || []).push(arguments) };
          ga.l = +new Date;
          ga('create', 'GTM-T9V396Z', 'auto');
          ga('send', 'pageview');
        });
      }
    </script>
  

  

  

  

  

  



  
<meta name="generator" content="Hexo 5.4.2"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>blogwong</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="rhel9安装部署mysql8"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-08-10 17:23" pubdate>
          2022年8月10日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          8.8k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          74 分钟
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">rhel9安装部署mysql8</h1>
            
            
              <div class="markdown-body">
                
                <h3 id="安装前准备"><a href="#安装前准备" class="headerlink" title="安装前准备"></a>安装前准备</h3><h4 id="CRT连接"><a href="#CRT连接" class="headerlink" title="CRT连接"></a>CRT连接</h4><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">vim</span> /etc/ssh/sshd_config<br>LoginGraceTime <span class="hljs-number">0</span><br>PermitRootLogin <span class="hljs-literal">yes</span><br>StrictModes <span class="hljs-literal">yes</span><br>UseDNS <span class="hljs-literal">no</span><br>MaxSessions <span class="hljs-number">50</span><br><br><span class="hljs-comment">#重启 sshd 服务</span><br>systemctl restart sshd.service<br></code></pre></td></tr></table></figure>
<h4 id="主机名、时区"><a href="#主机名、时区" class="headerlink" title="主机名、时区"></a>主机名、时区</h4><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">timedatectl</span> <span class="hljs-built_in">set-timezone</span> <span class="hljs-string">&quot;Asia/Shanghai&quot;</span> <br><span class="hljs-string">timedatectl</span> <span class="hljs-string">status</span>|<span class="hljs-string">grep</span> <span class="hljs-string">Local</span><br><span class="hljs-string">hostnamectl</span> <span class="hljs-built_in">set-hostname</span> <span class="hljs-string">rhel9</span><br><span class="hljs-string">vim</span> /<span class="hljs-string">etc</span>/<span class="hljs-string">hostname</span><br><span class="hljs-string">10</span>.<span class="hljs-string">16</span>.<span class="hljs-string">2</span>.<span class="hljs-string">58</span> <span class="hljs-string">rhel9</span><br></code></pre></td></tr></table></figure>
<h4 id="检查系统环境"><a href="#检查系统环境" class="headerlink" title="检查系统环境"></a>检查系统环境</h4><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-comment">#硬件</span><br>dmidecode |<span class="hljs-keyword">grep</span> Name<br><span class="hljs-comment">#内存</span><br>dmidecode|<span class="hljs-keyword">grep</span> -A5 <span class="hljs-string">&quot;Memory Device&quot;</span>|<span class="hljs-keyword">grep</span> Size|<span class="hljs-keyword">grep</span> -v No |<span class="hljs-keyword">grep</span> -v Range<br><span class="hljs-comment">#swap</span><br><span class="hljs-keyword">grep</span> SwapTotal /proc/meminfo | awk <span class="hljs-string">&#x27;&#123;print $2&#125;&#x27;</span><br><span class="hljs-comment">#内存大小</span><br>free -m<br><span class="hljs-comment">#磁盘空间</span><br>df -hT<br></code></pre></td></tr></table></figure>

<h4 id="关闭防火墙-amp-SElinux"><a href="#关闭防火墙-amp-SElinux" class="headerlink" title="关闭防火墙&amp;SElinux"></a>关闭防火墙&amp;SElinux</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs awk">systemctl stop firewalld.service          <span class="hljs-comment">#停止firewall</span><br>systemctl disable firewalld.service        <span class="hljs-comment">#禁止firewall开机启动</span><br>cp <span class="hljs-regexp">/etc/</span>selinux<span class="hljs-regexp">/config /</span>etc<span class="hljs-regexp">/selinux/</span>config_`date +<span class="hljs-string">&quot;%Y%m%d_%H%M%S&quot;</span>`&amp;&amp; sed -i <span class="hljs-string">&#x27;s/SELINUX\=enforcing/SELINUX\=disabled/g&#x27;</span> <span class="hljs-regexp">/etc/</span>selinux/config<br>cat <span class="hljs-regexp">/etc/</span>selinux/config<br><span class="hljs-comment">#不重启</span><br>setenforce <span class="hljs-number">0</span><br>getenforce<br>sestatus<br></code></pre></td></tr></table></figure>

<h4 id="关闭透明大页"><a href="#关闭透明大页" class="headerlink" title="关闭透明大页"></a>关闭透明大页</h4><p>关闭透明大页（即 <code>Transparent Huge Pages</code>，缩写为 THP）。数据库的内存访问模式往往是稀疏的而非连续的。当高阶内存碎片化比较严重时，分配 THP 页面会出现较高的延迟。</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs awk">cat <span class="hljs-regexp">/sys/</span>kernel<span class="hljs-regexp">/mm/</span>transparent_hugepage/enabled<br><span class="hljs-comment"># 执行 grubby 命令查看默认内核版本。</span><br><span class="hljs-comment"># grubby --default-kernel</span><br><span class="hljs-regexp">/boot/</span>vmlinuz-<span class="hljs-number">5.14</span>.<span class="hljs-number">0</span>-<span class="hljs-number">70.22</span>.<span class="hljs-number">1</span>.el9_0.x86_64<br><span class="hljs-comment"># 执行 grubby --update-kernel 命令修改内核配置</span><br>grubby --args=<span class="hljs-string">&quot;transparent_hugepage=never&quot;</span> --update-kernel <span class="hljs-regexp">/boot/</span>vmlinuz-<span class="hljs-number">5.14</span>.<span class="hljs-number">0</span>-<span class="hljs-number">70.22</span>.<span class="hljs-number">1</span>.el9_0.x86_64<br>执行 grubby --info 命令查看修改后的默认内核配置。--info 后需要使用实际的默认内核版本。<br>grubby --info <span class="hljs-regexp">/boot/</span>vmlinuz-<span class="hljs-number">5.14</span>.<span class="hljs-number">0</span>-<span class="hljs-number">70.22</span>.<span class="hljs-number">1</span>.el9_0.x86_64<br>echo never &gt; <span class="hljs-regexp">/sys/</span>kernel<span class="hljs-regexp">/mm/</span>transparent_hugepage/enabled<br>echo never &gt; <span class="hljs-regexp">/sys/</span>kernel<span class="hljs-regexp">/mm/</span>transparent_hugepage/defrag<br><span class="hljs-comment">#立即生效</span><br>cat <span class="hljs-regexp">/sys/</span>kernel<span class="hljs-regexp">/mm/</span>transparent_hugepage/enabled<br>cat <span class="hljs-regexp">/proc/</span>cmdline<br></code></pre></td></tr></table></figure>

<h4 id="关闭swap"><a href="#关闭swap" class="headerlink" title="关闭swap"></a>关闭swap</h4><p>DB 运行需要有足够的内存,如果内存充足，不建议使用 swap 作为内存不足的缓冲，因为这会降低性能,建议永久关闭系统 swap。</p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs maxima">echo <span class="hljs-string">&quot;vm.swappiness = 0&quot;</span>&gt;&gt; /etc/sysctl.conf<br>swapoff -a &amp;&amp; swapon -a<br>sysctl -p<br>vim /etc/fstab<br># 注释加载swap分区的那行记录<br>#UUID=4f863b5f-<span class="hljs-number">20b3</span>-4a99-a680-ddf84a3602a4 swap                    swap    defaults        <span class="hljs-number">0</span> <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure>

<h4 id="时钟同步"><a href="#时钟同步" class="headerlink" title="时钟同步"></a>时钟同步</h4><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nsis"><span class="hljs-params">system</span>ctl status chronyd.service<br>chronyc tracking<br><br><span class="hljs-comment">#结果是这个就正常</span><br>Leap status : <span class="hljs-params">Normal</span><br></code></pre></td></tr></table></figure>
<p>如果要使 NTP 服务尽快开始同步，执行以下命令。可以将 pool.ntp.org 替换为你的 NTP 服务器：</p>
<figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sas">sudo systemctl <span class="hljs-keyword">stop</span> ntpd.service <span class="hljs-variable">&amp;&amp;</span> \<br>sudo ntpdate pool.ntp.org <span class="hljs-variable">&amp;&amp;</span> \<br>sudo systemctl start ntpd.service<br></code></pre></td></tr></table></figure>
<p>如果要在 CentOS 7 系统上手动安装 NTP 服务，可执行以下命令：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">sudo yum install<span class="hljs-built_in"> ntp </span>ntpdate &amp;&amp; \<br>sudo systemctl start ntpd.service &amp;&amp; \<br>sudo systemctl <span class="hljs-built_in">enable</span> ntpd.service<br></code></pre></td></tr></table></figure>
<h4 id="磁盘、I-O调度设置"><a href="#磁盘、I-O调度设置" class="headerlink" title="磁盘、I/O调度设置"></a>磁盘、I/O调度设置</h4><p>将存储介质的 I/O 调度器设置为 noop。对于高速 SSD 存储介质，内核的 I/O 调度操作会导致性能损失。将调度器设置为 noop 后，内核不做任何操作，直接将 I/O 请求下发给硬件，以获取更好的性能。同时，noop 调度器也有较好的普适性。</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gradle"># cat <span class="hljs-regexp">/sys/</span>block<span class="hljs-regexp">/sda/</span>queue/scheduler<br>[mq-deadline] kyber bfq none<br></code></pre></td></tr></table></figure>

<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-number">1</span>、查看CentOS6 CentOS7下IO支持的调度算法<br>#CentOS <span class="hljs-number">6</span>.x<br>#dmesg | <span class="hljs-keyword">grep</span> -i scheduler<br>io scheduler noop registered<br>io scheduler anticipatory registered<br>io scheduler deadline registered<br>io scheduler cfq registered (<span class="hljs-keyword">default</span>)<br>#CentOS <span class="hljs-number">7</span>.x<br>#dmesg | <span class="hljs-keyword">grep</span> -i scheduler<br>[ <span class="hljs-number">0.739263</span>] io scheduler noop registered<br>[ <span class="hljs-number">0.739267</span>] io scheduler deadline registered (<span class="hljs-keyword">default</span>)<br>[ <span class="hljs-number">0.739315</span>] io scheduler cfq registered<br>#rhel9<br>[    <span class="hljs-number">0.069059</span>] rcu: RCU calculated value of scheduler-enlistment delay is <span class="hljs-number">100</span> jiffies.<br>[    <span class="hljs-number">0.445431</span>] io scheduler mq-deadline registered<br>[    <span class="hljs-number">0.446503</span>] io scheduler kyber registered<br>[    <span class="hljs-number">0.447362</span>] io scheduler bfq registered<br><br><span class="hljs-number">2</span>、查看设备当前的 I/O 调度器<br>#cat <span class="hljs-regexp">/sys/</span>block<span class="hljs-comment">//queue/scheduler</span><br>假设磁盘名称是 <span class="hljs-regexp">/dev/</span>sda<br>#cat <span class="hljs-regexp">/sys/</span>block<span class="hljs-regexp">/sda/</span>queue/scheduler<br>noop [deadline] cfq<br><span class="hljs-number">3</span>、临时生效的方法<br>#cat <span class="hljs-regexp">/sys/</span>block<span class="hljs-regexp">/sda/</span>queue/scheduler<br>noop [deadline] cfq<br>#echo bfq&gt;<span class="hljs-regexp">/sys/</span>block<span class="hljs-regexp">/sda/</span>queue/scheduler<br>#cat <span class="hljs-regexp">/sys/</span>block<span class="hljs-regexp">/sda/</span>queue/scheduler<br>noop deadline [cfq]<br><span class="hljs-number">4</span>、永久生效的方法<br>CentOS <span class="hljs-number">7</span>.x<br>#grubby --update-kernel=ALL --args=<span class="hljs-string">&quot;elevator=deadline&quot;</span><br>#reboot<br>#cat <span class="hljs-regexp">/sys/</span>block<span class="hljs-regexp">/sda/</span>queue/scheduler<br>noop [deadline] cfq<br>或者使用vi编辑器修改配置文件，添加elevator= cfq<br>#vim <span class="hljs-regexp">/etc/</span><span class="hljs-keyword">default</span>/grub<br>GRUB_CMDLINE_LINUX=<span class="hljs-string">&quot;crashkernel=auto rhgb quiet elevator=noop numa=off&quot;</span><br>然后保存文件，重新编译配置文件<br>BIOS-Based： grub2-mkconfig -o <span class="hljs-regexp">/boot/g</span>rub2/grub.cfg<br>UEFI-Based： grub2-mkconfig -o <span class="hljs-regexp">/boot/</span>efi<span class="hljs-regexp">/EFI/</span>centos/grub.cfg<br></code></pre></td></tr></table></figure>

<h4 id="CPU-频率模式设置"><a href="#CPU-频率模式设置" class="headerlink" title="CPU 频率模式设置"></a>CPU 频率模式设置</h4><p>为调整 CPU 频率的 <code>cpufreq</code> 模块选用 <code>performance</code> 模式。将 CPU 频率固定在其支持的最高运行频率上，不进行动态调节，可获取最佳的性能。</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">cpupower frequency-<span class="hljs-keyword">info</span> <span class="hljs-comment">--policy</span><br>analyzing CPU <span class="hljs-number">0</span>:<br>  Unable <span class="hljs-keyword">to</span> determine <span class="hljs-keyword">current</span> <span class="hljs-keyword">policy</span><br></code></pre></td></tr></table></figure>
<p><code>The governor &quot;powersave&quot;</code> 表示 cpufreq 的节能策略使用 <code>powersave</code>，需要调整为 <code>performance</code> 策略。如果是虚拟机或者云主机，则不需要调整，命令输出通常为 <code>Unable to determine current policy</code>。此为虚拟机不需修改，如物理机</p>
<p>创建 CPU 节能策略配置服务。</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs routeros">cat  &gt;&gt; /etc/systemd/system/cpupower.service &lt;&lt; EOF<br>[Unit]<br><span class="hljs-attribute">Description</span>=CPU performance<br>[Service]<br><span class="hljs-attribute">Type</span>=oneshot<br><span class="hljs-attribute">ExecStart</span>=/usr/bin/cpupower frequency-<span class="hljs-built_in">set</span> --governor performance<br>[Install]<br><span class="hljs-attribute">WantedBy</span>=multi-user.target<br>EOF<br></code></pre></td></tr></table></figure>
<p>应用 CPU 节能策略配置服务。</p>
<figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs nsis"><span class="hljs-params">system</span>ctl daemon-reload<br><span class="hljs-params">system</span>ctl enable cpupower.service<br><span class="hljs-params">system</span>ctl start cpupower.service<br></code></pre></td></tr></table></figure>

<h3 id="系统参数调整"><a href="#系统参数调整" class="headerlink" title="系统参数调整"></a>系统参数调整</h3><p><code>file-max</code> 中指定了系统范围内所有进程可打开的文件句柄的数量限制，在 MySQL 中很容易收到<code>”Too many open files in system”</code>这样的错误消息, 就应该增加这个值，这里由于测试环境设置为 100 万足够。<br><code>net.core.somaxconn</code> 是 Linux 中的一个 <code>kernel</code> 参数，表示 <code>socket</code> 监听 (listen) 的 <code>backlog</code> 上限。什么是 <code>backlog</code> 呢？<code>backlog</code> 就是 <code>socket</code> 的监听队列，当一个请求 (request) 尚未被处理或建立时，他会进入 <code>backlog</code>。而 <code>socket server</code> 可以一次性处理 <code>backlog</code> 中的所有请求，处理后的请求不再位于监听队列中。当 server 处理请求较慢，以至于监听队列被填满后，新来的请求会被拒绝。<br><code>net.ipv4.tcp_tw_recycle</code> 表示关闭启用 <code>TIME-WAIT</code> 状态 <code>sockets</code> 的快速回收，这个选项不推荐启用。在 <code>NAT(Network Address Translation)</code> 网络下，会导致大量的 TCP 连接建立错误。此值默认为 0，也是关闭状态，在 MySQL 的配置中有人也会开启此配置，这里在强调下。<br><code>net.ipv4.tcp_syncookies</code> 表示关闭 <code>SYN Cookies</code>。默认为 0，表示关闭；如果开启时，当出现 SYN 等待队列溢出时，启用cookies 来处理，可防范少量 SYN 攻击，和 tcp_tw_recycle 一样，在 NAT 网卡模式下不建议开启此参数。<br><code>vm.overcommit_memory</code> 文件指定了内核针对内存分配的策略，其值可以是 0、1、2。<br>0:(默认)表示内核将检查是否有足够的可用内存供应用进程使用；如果有足够的可用内存，内存申请允许；否则，内存申请失败，并把错误返回给应用进程。0 即是启发式的 <code>overcommitting handle</code>,会尽量减少 <code>swap</code> 的使用,root 可以分配比一般用户略多的内存。<br>1:表示内核允许分配所有的物理内存，而不管当前的内存状态如何，允许超过 <code>CommitLimit</code>，直至内存用完为止。<br>2:表示不允许超过 <code>CommitLimit</code> 值。<br><code>limit.conf</code> 用于限制用户可以使用的最大文件数、最大线程、最大内存使用量，<code>soft</code> 是一个告警值，<code>hard</code> 则是一定意义上的阈值，一旦超过 <code>hard</code> ，系统就会报错</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs arcade">echo <span class="hljs-string">&quot;fs.file-max = 1000000&quot;</span>&gt;&gt; <span class="hljs-regexp">/etc/</span>sysctl.conf<br>echo <span class="hljs-string">&quot;net.core.somaxconn = 32768&quot;</span>&gt;&gt; <span class="hljs-regexp">/etc/</span>sysctl.conf<br>echo <span class="hljs-string">&quot;net.ipv4.tcp_tw_recycle = 0&quot;</span>&gt;&gt; <span class="hljs-regexp">/etc/</span>sysctl.conf<br>echo <span class="hljs-string">&quot;net.ipv4.tcp_syncookies = 0&quot;</span>&gt;&gt; <span class="hljs-regexp">/etc/</span>sysctl.conf<br>echo <span class="hljs-string">&quot;vm.overcommit_memory = 1&quot;</span>&gt;&gt; <span class="hljs-regexp">/etc/</span>sysctl.conf<br><br>sysctl -p<br></code></pre></td></tr></table></figure>

<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">cat <span class="hljs-symbol">&lt;&lt; EOF &gt;&gt;</span>/etc/<span class="hljs-keyword">security</span>/limits.conf<br>db           soft    nofile          <span class="hljs-number">1000000</span><br>db           hard    nofile          <span class="hljs-number">1000000</span><br>db           soft    stack           <span class="hljs-number">32768</span><br>db           hard    stack           <span class="hljs-number">32768</span><br>EOF<br></code></pre></td></tr></table></figure>

<h3 id="安装前卸载"><a href="#安装前卸载" class="headerlink" title="安装前卸载"></a>安装前卸载</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vim">rpm -<span class="hljs-keyword">qa</span> | <span class="hljs-keyword">grep</span> -i mariadb<br><span class="hljs-keyword">c</span><br><br>yum <span class="hljs-built_in">remove</span> mariadb-libs<br></code></pre></td></tr></table></figure>

<p>#删除用户/用户组</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gradle">more <span class="hljs-regexp">/etc/</span>passwd | <span class="hljs-keyword">grep</span> mysql<br>more <span class="hljs-regexp">/etc/</span>shadow | <span class="hljs-keyword">grep</span> mysql<br>more <span class="hljs-regexp">/etc/g</span>roup | <span class="hljs-keyword">grep</span> mysql<br><br>groupdel mysql<br>userdel mysql<br></code></pre></td></tr></table></figure>

<h3 id="列出安装包明细"><a href="#列出安装包明细" class="headerlink" title="列出安装包明细"></a>列出安装包明细</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">mysql</span>-commercial-backup-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">30</span>-<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.el9.x86_64.rpm 备份<br><span class="hljs-attribute">mysql</span>-commercial-backup-debuginfo-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">30</span>-<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.el9.x86_64.rpm 调试组件<br><span class="hljs-attribute">mysql</span>-commercial-client-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">30</span>-<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.el9.x86_64.rpm 客户端<br><span class="hljs-attribute">mysql</span>-commercial-client-debuginfo-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">30</span>-<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.el9.x86_64.rpm 调试组件<br><span class="hljs-attribute">mysql</span>-commercial-client-plugins-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">30</span>-<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.el9.x86_64.rpm 插件<br><span class="hljs-attribute">mysql</span>-commercial-client-plugins-debuginfo-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">30</span>-<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.el9.x86_64.rpm 调试组件<br><span class="hljs-attribute">mysql</span>-commercial-common-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">30</span>-<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.el9.x86_64.rpm 公共文件<br><span class="hljs-attribute">mysql</span>-commercial-debuginfo-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">30</span>-<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.el9.x86_64.rpm 调试组件<br><span class="hljs-attribute">mysql</span>-commercial-devel-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">30</span>-<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.el9.x86_64.rpm 开发库<br><span class="hljs-attribute">mysql</span>-commercial-icu-data-files-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">30</span>-<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.el9.x86_64.rpm ICU<br><span class="hljs-attribute">mysql</span>-commercial-libs-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">30</span>-<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.el9.x86_64.rpm 共享库<br><span class="hljs-attribute">mysql</span>-commercial-libs-debuginfo-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">30</span>-<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.el9.x86_64.rpm 调试组件<br><span class="hljs-attribute">mysql</span>-commercial-server-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">30</span>-<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.el9.x86_64.rpm 服务端<br><span class="hljs-attribute">mysql</span>-commercial-server-debuginfo-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">30</span>-<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.el9.x86_64.rpm 调试组件<br><span class="hljs-attribute">mysql</span>-commercial-server-debug-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">30</span>-<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.el9.x86_64.rpm 服务端调试组件<br><span class="hljs-attribute">mysql</span>-commercial-server-debug-debuginfo-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">30</span>-<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.el9.x86_64.rpm 调试组件<br><span class="hljs-attribute">mysql</span>-commercial-test-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">30</span>-<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.el9.x86_64.rpm 测试组件<br><span class="hljs-attribute">mysql</span>-commercial-test-debuginfo-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">30</span>-<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.el9.x86_64.rpm 调试组件<br><span class="hljs-attribute">mysql</span>-router-commercial-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">30</span>-<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.el9.x86_64.rpm MySQL路由<br><span class="hljs-attribute">mysql</span>-router-commercial-debuginfo-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">30</span>-<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.el9.x86_64.rpm 调试组件<br><span class="hljs-attribute">README</span>.txt 更新说明<br></code></pre></td></tr></table></figure>

<h3 id="安装依赖包"><a href="#安装依赖包" class="headerlink" title="安装依赖包"></a>安装依赖包</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cmake">dnf <span class="hljs-keyword">install</span> net-tools -y<br>dnf <span class="hljs-keyword">install</span> perl-Module-Build.noarch<br></code></pre></td></tr></table></figure>

<h3 id="安装rpm包（必要安装包）"><a href="#安装rpm包（必要安装包）" class="headerlink" title="安装rpm包（必要安装包）"></a>安装rpm包（必要安装包）</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">rpm</span> -ivh mysql-commercial-client-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">30</span>-<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.el9.x86_64.rpm \<br><span class="hljs-attribute">mysql</span>-commercial-client-plugins-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">30</span>-<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.el9.x86_64.rpm \<br><span class="hljs-attribute">mysql</span>-commercial-common-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">30</span>-<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.el9.x86_64.rpm \<br><span class="hljs-attribute">mysql</span>-commercial-icu-data-files-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">30</span>-<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.el9.x86_64.rpm \<br><span class="hljs-attribute">mysql</span>-commercial-libs-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">30</span>-<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.el9.x86_64.rpm \<br><span class="hljs-attribute">mysql</span>-commercial-server-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">30</span>-<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.el9.x86_64.rpm<br></code></pre></td></tr></table></figure>

<h3 id="验证MySQL是否安装成功"><a href="#验证MySQL是否安装成功" class="headerlink" title="验证MySQL是否安装成功"></a>验证MySQL是否安装成功</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs gradle">mysqladmin --version<br>cat <span class="hljs-regexp">/etc/</span>passwd|<span class="hljs-keyword">grep</span> mysql<br>cat <span class="hljs-regexp">/etc/g</span>roup|<span class="hljs-keyword">grep</span> mysql<br>usermod mysql -m -g mysql -s <span class="hljs-regexp">/bin/</span>bash -d <span class="hljs-regexp">/home/my</span>sql<br><br>rpm -qa | <span class="hljs-keyword">grep</span> -i mysql<br></code></pre></td></tr></table></figure>

<h3 id="服务状态"><a href="#服务状态" class="headerlink" title="服务状态"></a>服务状态</h3><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs nsis"><span class="hljs-params">system</span>ctl status mysqld<br><span class="hljs-params">system</span>ctl start mysqld<br><span class="hljs-params">system</span>ctl stop mysqld<br><span class="hljs-params">system</span>ctl restart mysqld<br><br>设置开机自启动：<br><span class="hljs-params">system</span>ctl enable mysqld<br>chkconfig --list | grep mysql<br><span class="hljs-params">system</span>ctl list-unit-files<br></code></pre></td></tr></table></figure>

<h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><h4 id="因MySQL-8-0在Linux下库表名默认区分大小写，且只能在初始化时指定不能修改，现直接修改初始化配置文件避免重新初始化"><a href="#因MySQL-8-0在Linux下库表名默认区分大小写，且只能在初始化时指定不能修改，现直接修改初始化配置文件避免重新初始化" class="headerlink" title="因MySQL 8.0在Linux下库表名默认区分大小写，且只能在初始化时指定不能修改，现直接修改初始化配置文件避免重新初始化"></a>因MySQL 8.0在Linux下库表名默认区分大小写，且只能在初始化时指定不能修改，现直接修改初始化配置文件避免重新初始化</h4><p>mysqld –initialize –user=mysql –lower-case-table-names=1 –datadir=/opt/mysql/data/</p>
<p>#查看初始密码<br>cat /var/log/mysqld.log | grep password<br>#报错<br>##文件打不开<br>cp /usr/share/mysql-8.0/english/errmsg.sys /usr/share/mysql-8.0/errmsg.sys<br>##socket文件打不开<br>mkdir -p /var/lib/mysql<br>chown -R mysql:mysql /var/lib/mysql</p>
<h3 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment">## 先设置密码，例如：Mysql@123，注意密码为高安保等级（例如大小写和特殊字符的组合），不然无法使用其他操作</span><br>ALTER<span class="hljs-built_in"> USER </span><span class="hljs-string">&#x27;root&#x27;</span>@<span class="hljs-string">&#x27;localhost&#x27;</span> IDENTIFIED BY <span class="hljs-string">&#x27;你的密码&#x27;</span>;<br><span class="hljs-comment">## 看当前所有数据库</span><br>show databases;<br><span class="hljs-comment">## 进入mysql库</span><br>use mysql;<br><span class="hljs-comment">## 查看当前默认规则：</span><br>show variables like <span class="hljs-string">&#x27;validate_password%&#x27;</span>;<br><span class="hljs-comment">## 修改校验密码策略等级:LOW，默认为：MEDIUM</span><br><span class="hljs-built_in">set</span> global validate_password.<span class="hljs-attribute">policy</span>=LOW;<br><span class="hljs-comment">## 设置密码长度至少为 6，默认为8；</span><br><span class="hljs-built_in">set</span> global validate_password.<span class="hljs-attribute">length</span>=6;<br><span class="hljs-comment">## 立即生效</span><br>flush privileges;<br><span class="hljs-comment">## 查看用户信息</span><br>select host, user, authentication_string, plugin <span class="hljs-keyword">from</span><span class="hljs-built_in"> user;</span><br><span class="hljs-built_in"></span><span class="hljs-comment"># 更新root信息</span><br>update<span class="hljs-built_in"> user </span><span class="hljs-built_in">set</span> <span class="hljs-attribute">host</span>=<span class="hljs-string">&#x27;%&#x27;</span> where <span class="hljs-attribute">user</span>=<span class="hljs-string">&#x27;root&#x27;</span>;<br><span class="hljs-comment"># 授权root用户可以远程登陆</span><br>GRANT ALL ON *.* <span class="hljs-keyword">TO</span> <span class="hljs-string">&#x27;root&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span>;<br><span class="hljs-comment">## 远程连接设置</span><br>ALTER<span class="hljs-built_in"> USER </span><span class="hljs-string">&#x27;root&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span> IDENTIFIED WITH mysql_native_password BY <span class="hljs-string">&#x27;你的密码&#x27;</span>; <br><span class="hljs-comment">## 立即生效</span><br>flush privileges;<br><br></code></pre></td></tr></table></figure>




                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" class="category-chain-item">数据库</a>
  
  
    <span>></span>
    
  <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/" class="category-chain-item">MySQL</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/MySQL/">#MySQL</a>
      
        <a href="/tags/%E8%87%AA%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93/">#自建数据库</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>rhel9安装部署mysql8</div>
      <div>https://blog.wongcw.cn/2022/08/10/rhel9安装mysql8/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>wangcw</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2022年8月10日</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>许可协议</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - 署名">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
            </div>

            
  <article id="comments" lazyload>
    
  <script type="text/javascript">
    Fluid.utils.loadComments('#comments', function() {
      var light = 'github-light';
      var dark = 'github-dark';
      var schema = document.documentElement.getAttribute('data-user-color-scheme');
      if (schema === 'dark') {
        schema = dark;
      } else {
        schema = light;
      }
      window.UtterancesThemeLight = light;
      window.UtterancesThemeDark = dark;
      var s = document.createElement('script');
      s.setAttribute('src', 'https://utteranc.es/client.js');
      s.setAttribute('repo', 'redgreat/redgreat.github.io');
      s.setAttribute('issue-term', 'pathname');
      
      s.setAttribute('label', 'utterances');
      
      s.setAttribute('theme', schema);
      s.setAttribute('crossorigin', 'anonymous');
      document.getElementById('comments').appendChild(s);
    })
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <script>document.write("Copyright © wangcw 2020-" + new Date().getFullYear() + " All Rights Reserved") </script> <i class="iconfont icon-love"></i> <span id="timeDate"></span> <span id="times"></span> <script> var now = new Date(); function createtime() {  var grt= new Date("01/01/2022 00:00:00"); new Date().setTime(new Date().getTime()+250);  days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);  hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);  if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);  mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}  seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);  snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}  document.getElementById("timeDate").innerHTML = "本站已各种夹缝中安全运行 "+dnum+" 天 ";  document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒"; } setInterval("createtime()",250) </script> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量 
        <span id="busuanzi_value_site_pv"></span>
         次
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数 
        <span id="busuanzi_value_site_uv"></span>
         人
      </span>
    
    
  
</div>

  
  
    <!-- 备案信息 ICP for China -->
    <div class="beian">
  <span>
    <a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">
      鲁ICP备2022020665号
    </a>
  </span>
  
</div>

  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  
<script src="/js/xiantiao.js"></script>
<script src="/js/xiaoxuehua.js"></script>



<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
